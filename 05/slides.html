<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Veljko Petrović">
  <title>Operativni Sistemi - Simulator operativnog sistema 1</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/theme/night.css" id="theme">
  <link rel="stylesheet" href="slides.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Operativni Sistemi - Simulator operativnog sistema 1</h1>
  <p class="author">Veljko Petrović</p>
  <p class="date">Mart, 2023</p>
</section>

<section>
<section id="uvod" class="title-slide slide level1">
<h1>Uvod</h1>

</section>
<section id="šta-simuliramo" class="slide level2">
<h2>Šta simuliramo</h2>
<ul>
<li>Ovo je simulator operativnog sistema koji radi pod određenim znatnim ograničenjima</li>
<li>Simulira (isključivo) jednoprocesorni operativni sistem i to kroz konkurentnu biblioteku</li>
<li>Šta znači da simulira kroz konkurentnu biblioteku? Da je interfejs prema ovome onaj isti C++ interfejs ka nitima, sa tom razlikom da umesto da koristimo POSIX niti, mi sami realizujemo prebacivanje između niti i to u obliku simulatora operativnog sistema.</li>
<li>Radi (isključivo) na 32-bitnoj x86 arhitekturi koju ste koristili prošli semestar.</li>
</ul>
</section>
<section id="šta-simuliramo-1" class="slide level2">
<h2>Šta simuliramo</h2>
<ul>
<li>Ništa od ovih stvari nisu 100% aktuelne, ali su odličan smanjeni skup funkcionalnosti koji nam može pomoći da razumemo osnovne principe.</li>
<li>Gde je prigodno tokom kursa, mi skačemo u kod Linux kernela da vidimo apsolutno aktuelnu i ozbiljnu verziju ovoga</li>
<li>Termin koji povremeno koristimo za simulator je i CppTss pošto implementiramo podskup za niti iz ranog 2011 standarda za C++ zato što je relativno jednostavan za razumevanje.</li>
</ul>
</section></section>
<section>
<section id="osnove-simulatora" class="title-slide slide level1">
<h1>Osnove simulatora</h1>

</section>
<section id="atomski-regioni" class="slide level2">
<h2>Atomski regioni</h2>
<ul>
<li>Stvaranje atomskih regiona omogućuje klasa Atomic_region.</li>
<li>Njen konstruktor onemogućuje prekide, a destruktor vraća prekide u stanje koje je prethodilo akciji konstruktora.</li>
</ul>
</section>
<section id="atomski-regioni-1" class="slide level2">
<h2>Atomski regioni</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">//kod</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="atomski-regioni-2" class="slide level2">
<h2>Atomski regioni</h2>
<ul>
<li>Upotrebu atomskog regiona ilustruje primer rukovanja pozicijom kursora u kome nisu moguća štetna preplitanja niti i obrada prekida, jer telo operacije get() klase Position obrazuje atomski region.</li>
<li>Pošto se operacija set() poziva samo iz obrada prekida, njeno telo po definiciji obrazuje atomski region (jer su prekidi onemogućeni u toku obrade prekida, barem kod nas), pa je tako osigurana međusobna isključivost operacija klase Position.</li>
</ul>
</section>
<section id="primer-sa-kursorom" class="slide level2">
<h2>Primer sa kursorom</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Position <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">,</span> y<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    Position<span class="op">();</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> set<span class="op">(</span><span class="dt">int</span> new_x<span class="op">,</span> <span class="dt">int</span> new_y<span class="op">);</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> get<span class="op">(</span><span class="dt">int</span><span class="op">*</span> current_x<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> current_y<span class="op">);</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</section>
<section id="primer-sa-kursorom-1" class="slide level2">
<h2>Primer sa kursorom</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Position<span class="op">::</span>Position<span class="op">(){</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Position<span class="op">::</span>set<span class="op">(</span><span class="dt">int</span> new_x<span class="op">,</span> <span class="dt">int</span> new_y<span class="op">){</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">//ne mora atomski ako su prekidi prekida zabranjeni</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> new_x<span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> new_y<span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="primer-sa-kursorom-2" class="slide level2">
<h2>Primer sa kursorom</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Position<span class="op">::</span>get<span class="op">(</span><span class="dt">int</span><span class="op">*</span> current_x<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> current_y<span class="op">){</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>current_x <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>current_y <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-driver" class="slide level2">
<h2>Klasa <code>Driver</code></h2>
<ul>
<li>Pisanje drajvera olakšava klasa Driver.</li>
<li>Nju nasleđuju klase koje opisuju ponašanje drajvera.</li>
<li>Drajvere karakteriše saradnja obrađivača prekida i pozadinskih niti.</li>
<li>U okviru klase, koja opisuje ponašanje drajvera, obrađivač prekida se predstavlja u obliku funkcije bez povratne vrednosti i bez parametara.</li>
<li>Ova funkcija mora biti static, da bi se mogla koristiti njena adresa.</li>
<li>Takva moraju biti i sva polja klase kojima ona pristupa.</li>
</ul>
</section>
<section id="klasa-driver-1" class="slide level2">
<h2>Klasa <code>Driver</code></h2>
<ul>
<li>Operacija <code>start_interrupt_handling()</code> klase Driver omogućuje smeštanje adrese obrađivača prekida u tabelu prekida.</li>
<li>Prvi argument poziva ove operacije predstavlja broj vektora prekida, a drugi adresu obrađivača prekida.</li>
<li>Saradnja obrađivača prekida i pozadinskih niti podrazumeva da pozadinske niti čekaju dešavanje spoljnih događaja, a da obrađivači prekida objavljuju dešavanje spoljnih događaja.</li>
</ul>
</section>
<section id="neki-primeri-iz-stvarne-prakse-linux" class="slide level2">
<h2>Neki primeri iz stvarne prakse – Linux</h2>
<p><img data-src="img/2023-03-21-01-40-41.png" /></p>
</section>
<section id="neki-primeri-iz-stvarne-prakse-linux-1" class="slide level2">
<h2>Neki primeri iz stvarne prakse – Linux</h2>
<p><img data-src="img/2023-03-21-01-41-02.png" /></p>
</section>
<section id="neki-primeri-iz-stvarne-prakse-linux-2" class="slide level2">
<h2>Neki primeri iz stvarne prakse – Linux</h2>
<p><img data-src="img/2023-03-21-01-41-11.png" /></p>
</section>
<section id="event-i-driver" class="slide level2">
<h2><code>Event</code> i <code>Driver</code></h2>
<ul>
<li>Klasa <code>Driver</code> ima kao povezanu klasu <code>Event</code></li>
<li><code>signal</code> metoda
<ul>
<li>Poziva se iz atomskog regiona</li>
<li>Nit prelazi u čekanje</li>
<li>Preključivanje na spremnu nit</li>
</ul></li>
<li><code>expect</code> metoda
<ul>
<li>Poziva se iz obrađivača prekida</li>
<li>Nit koja čeka najduže prelazi u stanje spremna</li>
<li>Poziva se na kraju obrade prekida samo jednom</li>
</ul></li>
</ul>
</section>
<section id="drajver-za-rukovanje-vremenom" class="slide level2">
<h2>Drajver za rukovanje vremenom</h2>
<ul>
<li>Ovaj drajver registruje proticanje vremena u računaru brojanjem otkucaja sata.</li>
<li>Otkucaji, čiji period zavisi od takta procesora, nisu uvek podesni za određivanje vremena u danu, predstavljenog brojem sati, minuta i sekundi, jer sekunda ne može uvek da se izrazi celim brojem perioda ovakvih otkucaja.</li>
<li>Zato je zgodno uvesti dodatni sat, čiji otkucaji (prekidi) imaju period od tačno jedne sekunde.</li>
<li>Ova komponenta se, tradicionalno, zove ’Real Time Clock’ u računarima i vi je imate na matičnoj ploči, tipično zakčenoj za SRAM modul i CR2032 bateriju.</li>
</ul>
</section>
<section id="drajver-za-rukovanje-vremenom-1" class="slide level2">
<h2>Drajver za rukovanje vremenom</h2>
<ul>
<li>Rukovanje ovim satom, odnosno rukovanje vremenom opisuje klasa <code>Timer_driver</code>.</li>
<li>Njena tri celobrojna polja: <code>hour</code>, <code>minute</code> i <code>second</code> sadrže broj proteklih sati, minuta i sekundi.</li>
<li>Početni sadržaj ovih polja određuje konstruktor klase <code>Timer_driver</code>.</li>
</ul>
</section>
<section id="drajver-za-rukovanje-vremenom-2" class="slide level2">
<h2>Drajver za rukovanje vremenom</h2>
<ul>
<li>Pored toga on u element tabele prekida, koga indeksira konstanta <code>TIMER</code> (broj vektora prekida dodatnog sata), smesti adresu njene operacije <code>interrupt_handler()</code>, koja je zadužena za periodičnu izmenu sadržaja polja <code>hour</code>, <code>minute</code> i <code>second</code>, sa periodom od jedne sekunde.</li>
</ul>
</section>
<section id="drajver-za-rukovanje-vremenom-3" class="slide level2">
<h2>Drajver za rukovanje vremenom</h2>
<ul>
<li>Klasa <code>Timer_driver</code> sadrži i operacije <code>set()</code> i <code>get()</code> za zadavanje i preuzimanje sadržaja njenih polja.</li>
<li>To su osetljive operacije, čije preplitanje sa obradom prekida sata je štetno.</li>
<li>Na primer, ako se obrada prekida sata desi nakon preuzimanja sadržaja polja hour, a pre preuzimanja sadržaja polja minute, i ako je, uz to, broj minuta pre periodične izmene bio na granici od 59, tada preuzeto vreme kasni iza stvarnog za 60 minuta.</li>
<li>Da bi se ovakva štetna preplitanja sprečila, preuzimanja i zadavanja sadržaja njenih polja moraju da budu u atomskim regionima.</li>
</ul>
</section>
<section id="klasa-timer_driver" class="slide level2">
<h2>Klasa <code>Timer_driver</code></h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Timer_driver <span class="op">:</span> <span class="kw">public</span> Driver <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">int</span> hour<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">int</span> minute<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">int</span> second<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> interrupt_handler<span class="op">();</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    Timer_driver<span class="op">()</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> start_interrupt_handling<span class="op">(</span>TIMER<span class="op">,</span>   </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>      interrupt_handler<span class="op">);</span> <span class="op">};</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> set<span class="op">(</span><span class="at">const</span> <span class="dt">int</span> h<span class="op">,</span> <span class="at">const</span> <span class="dt">int</span> m<span class="op">,</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">const</span> <span class="dt">int</span> s<span class="op">);</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> get<span class="op">(</span><span class="dt">int</span><span class="op">*</span> h<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> m<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> s<span class="op">)</span> <span class="at">const</span><span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</section>
<section id="klasa-timer_driver-1" class="slide level2">
<h2>Klasa <code>Timer_driver</code></h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> Timer_driver<span class="op">::</span>hour <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> Timer_driver<span class="op">::</span>minute <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>Int Timer_driver<span class="op">::</span>second <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-timer_driver-2" class="slide level2">
<h2>Klasa <code>Timer_driver</code></h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Timer_driver<span class="op">::</span>interrupt_handler<span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>second <span class="op">&lt;</span> <span class="dv">59</span><span class="op">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        second<span class="op">++;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        second <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>minute <span class="op">&lt;</span> <span class="dv">59</span><span class="op">)</span> minute<span class="op">++;</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            minute <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>hour <span class="op">&lt;</span> <span class="dv">23</span><span class="op">)</span> hour<span class="op">++;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> hour <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-timer_driver-3" class="slide level2">
<h2>Klasa <code>Timer_driver</code></h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Timer_driver<span class="op">::</span>set<span class="op">(</span><span class="at">const</span> <span class="dt">int</span> h<span class="op">,</span> <span class="at">const</span> <span class="dt">int</span> m<span class="op">,</span> <span class="at">const</span> <span class="dt">int</span> s<span class="op">){</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    hour <span class="op">=</span> h<span class="op">;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    minute <span class="op">=</span> m<span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    second <span class="op">=</span> s<span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-timer_driver-4" class="slide level2">
<h2>Klasa <code>Timer_driver</code></h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Timer_driver<span class="op">::</span>get<span class="op">(</span><span class="dt">int</span><span class="op">*</span> h<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> m<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> s<span class="op">)</span> <span class="at">const</span><span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>h <span class="op">=</span> hour<span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>m <span class="op">=</span> minute<span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>s <span class="op">=</span> second<span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-sleep_driver" class="slide level2">
<h2>Klasa <code>Sleep_driver</code></h2>
<ul>
<li>Upotrebu klase <code>Driver</code> ilustruje i primer drajvera koji omogućuje uspavljivanje jedne niti dok ne protekne zadani broj otkucaja sata.</li>
<li>Ovo uspavljivanje može da se prikaže kao očekivanje dešavanja zadanog broja otkucaja sata.</li>
<li>To opisuje klasa Sleep_driver.</li>
<li>Njena operacija simple_sleep_for() omogućuje jednoj niti da zaustavi svoju aktivnost dok se ne desi zadani broj otkucaja sata.</li>
<li>Zadatak obrađivača prekida (operacije interrupt_handler()) je da odbroji zadani broj otkucaja sata i da nakon toga signalizira da je moguć nastavak aktivnosti uspavane niti.</li>
</ul>
</section>
<section id="klasa-sleep_driver-1" class="slide level2">
<h2>Klasa Sleep_driver</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Sleep_driver<span class="op">:</span> <span class="kw">public</span> Driver <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">unsigned</span> <span class="dt">long</span> countdown<span class="op">;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> Event alarm<span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> interrupt_handler<span class="op">();</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    Sleep_driver<span class="op">(</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>       <span class="op">{</span> start_interrupt_handling<span class="op">(</span>TIMER<span class="op">,</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>             interrupt_handler<span class="op">);</span> <span class="op">};</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> simple_sleep_for<span class="op">(</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>             <span class="dt">unsigned</span> <span class="dt">long</span> duration<span class="op">);</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</section>
<section id="klasa-sleep_driver-2" class="slide level2">
<h2>Klasa Sleep_driver</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">long</span> Sleep_driver<span class="op">::</span>countdown <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Sleep_driver<span class="op">::</span>interrupt_handler<span class="op">(){</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">((</span>countdown <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">((--</span>countdown<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">))</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        alarm<span class="op">.</span>signal<span class="op">();</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-sleep_driver-3" class="slide level2">
<h2>Klasa Sleep_driver</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Sleep_driver<span class="op">::</span>simple_sleep_for<span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span> duration<span class="op">){</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>duration <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        countdown <span class="op">=</span> duration<span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        alarm<span class="op">.</span>expect<span class="op">();</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section></section>
<section>
<section id="ulaznoizlazni-moduli" class="title-slide slide level1">
<h1>Ulazno/izlazni moduli</h1>

</section>
<section id="drajveri-tastature-i-ekrana" class="slide level2">
<h2>Drajveri tastature i ekrana</h2>
<ul>
<li>Klasa <code>Display_driver</code> sadrži drajver ekrana koji upravlja kontrolerom ekrana.</li>
<li>Kontroler ekrana (objekat <code>display_controller</code>) sadrži registar stanja (<code>display_controller.status_reg</code>) i registar podataka (<code>display_controller.data_reg</code>).</li>
<li>Prikaz znaka na ekranu je moguć ako registar stanja sadrži konstantu <code>DISPLAY_READY</code>.</li>
<li>U tom slučaju se kod znaka smešta u registar podataka, a u registar stanja se smešta konstanta <code>DISPLAY_BUSY</code>.</li>
<li>Ova konstanta ostaje u registru stanja dok traje prikaz znaka.</li>
</ul>
</section>
<section id="drajveri-tastature-i-ekrana-1" class="slide level2">
<h2>Drajveri tastature i ekrana</h2>
<ul>
<li>Po prikazu znaka, kontroler ekrana smešta u registar stanja konstantu <code>DISPLAY_READY</code> (podrazumeva se da se ova vrednost nalazi u registru stanja na početku rada kontrolera ekrana).</li>
<li>Pokušaj niti da prikaže znak, dok je u registru stanja konstanta <code>DISPLAY_BUSY</code>, zaustavlja aktivnost niti.</li>
<li>Nastavak aktivnosti niti usledi nakon obrade prekida ekrana, koja objavljuje da je prikaz prethodnog znaka završen.</li>
</ul>
</section>
<section id="drajveri-tastature-i-ekrana-2" class="slide level2">
<h2>Drajveri tastature i ekrana</h2>
<ul>
<li>Zaustavljanje i nastavak aktivnosti niti omogućuje polje <code>displayed_char</code> klase <code>Display_driver</code>.</li>
<li>Opisano ponašanje drajvera ekrana ostvaruju operacije <code>character_put()</code> i <code>interrupt_handler()</code> klase <code>Display_driver</code>.</li>
<li>Broj vektora prekida ekrana određuje konstanta <code>DISPLAY</code>.</li>
</ul>
</section>
<section id="drajver-ekrana" class="slide level2">
<h2>Drajver Ekrana</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Display_driver <span class="op">:</span> <span class="kw">public</span> Driver <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> Event displayed_char<span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">static</span> <span class="dt">void</span> interrupt_handler<span class="op">();</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        Display_driver<span class="op">(</span><span class="at">const</span> Display_driver<span class="op">&amp;);</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        Display_driver<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Display_driver<span class="op">&amp;);</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="op">:</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        Display_driver<span class="op">()</span></span></code></pre></div>
</section>
<section id="drajver-ekrana-1" class="slide level2">
<h2>Drajver Ekrana</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span> start_interrupt_handling<span class="op">(</span>DISPLAY<span class="op">,</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>          interrupt_handler<span class="op">);</span> <span class="op">};</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> character_put<span class="op">(</span><span class="at">const</span> <span class="dt">char</span> c<span class="op">);</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>Display_driver<span class="op">::</span>Event</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>Display_driver<span class="op">::</span>displayed_char<span class="op">;</span></span></code></pre></div>
</section>
<section id="drajver-ekrana-2" class="slide level2">
<h2>Drajver Ekrana</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>Display_driver<span class="op">::</span>interrupt_handler<span class="op">()</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        displayed_char<span class="op">.</span>signal<span class="op">();</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span></span></code></pre></div>
</section>
<section id="drajver-ekrana-3" class="slide level2">
<h2>Drajver Ekrana</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Display_driver<span class="op">::</span>character_put<span class="op">(</span><span class="at">const</span> <span class="dt">char</span> c<span class="op">)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        Atomic_region ar<span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>display_controller<span class="op">.</span>status_reg <span class="op">==</span> DISPLAY_BUSY<span class="op">)</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                displayed_char<span class="op">.</span>expect<span class="op">();</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        display_controller<span class="op">.</span>data_reg <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        display_controller<span class="op">.</span>status_reg <span class="op">=</span> DISPLAY_BUSY<span class="op">;</span></span></code></pre></div>
</section>
<section id="drajver-ekrana-4" class="slide level2">
<h2>Drajver Ekrana</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> Display_driver display_driver<span class="op">;</span></span></code></pre></div>
</section>
<section id="drajver-tastature" class="slide level2">
<h2>Drajver tastature</h2>
<ul>
<li>Klasa <code>Keyboard_driver</code> sadrži drajver tastature koji upravlja kontrolerom tastature.</li>
<li>Kontroler tastature (objekat <code>keyboard_controller</code>) sadrži registar podataka (<code>keyboard_controller.data_reg</code>).</li>
<li>Podrazumeva se da pritisak dirke na tastaturi:
<ul>
<li>dovede do smeštanja koda odgovarajućeg znaka u registar podataka.</li>
<li>izazove prekid tastature.</li>
</ul></li>
<li>Pomenuti kod znaka se preuzima iz registra podataka u obradi prekida tastature i smešta u cirkularni bafer, ako on nije pun.</li>
</ul>
</section>
<section id="drajver-tastature-1" class="slide level2">
<h2>Drajver tastature</h2>
<ul>
<li>Cirkularnom baferu odgovara polje buffer klase <code>Keyboard_driver</code>.</li>
<li>Njeno polje <code>count</code> određuje popunjenost ovog bafera.</li>
<li>Indekse cirkularnog bafera sadrže polja <code>first_full</code> i <code>first_empty</code> klase <code>Keyboard_driver</code>.</li>
<li>Pokušaj niti da preuzme znak, kada je cirkularni bafer prazan, zaustavlja njenu aktivnost.</li>
</ul>
</section>
<section id="drajver-tastature-2" class="slide level2">
<h2>Drajver tastature</h2>
<ul>
<li>Nastavak aktivnosti niti usledi nakon obrade prekida tastature.</li>
<li>Zaustavljanje i nastavak aktivnosti niti omogućije polje <code>pressed</code> klase <code>Keyboard_driver</code>.</li>
<li>Opisano ponašanje drajvera tastature ostvaruju operacije <code>character_get()</code> i <code>interrrupt_handler()</code> klase <code>Keyboard_driver</code>.</li>
<li>Broj vektora prekida tastature određuje konstanta <code>KEYBOARD</code>.</li>
</ul>
</section>
<section id="drajver-tastature-3" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">unsigned</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>KEYBOARD_BUFFER_SIZE <span class="op">=</span> <span class="dv">1024</span><span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Keyboard_driver <span class="op">:</span> <span class="kw">public</span> Driver <span class="op">{</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> Event pressed<span class="op">;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">char</span> buffer<span class="op">[</span>KEYBOARD_BUFFER_SIZE<span class="op">];</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">unsigned</span> count<span class="op">;</span></span></code></pre></div>
</section>
<section id="drajver-tastature-4" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb19"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">unsigned</span> first_full<span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">unsigned</span> first_empty<span class="op">;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> interrupt_handler<span class="op">();</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    Keyboard_driver<span class="op">(</span><span class="at">const</span> Keyboard_driver<span class="op">&amp;);</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    Keyboard_driver<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Keyboard_driver<span class="op">&amp;);</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    Keyboard_driver<span class="op">()</span></span></code></pre></div>
</section>
<section id="drajver-tastature-5" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> start_interrupt_handling<span class="op">(</span>KEYBOARD<span class="op">,</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>      interrupt_handler<span class="op">);</span> <span class="op">};</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> character_get<span class="op">();</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>Keyboard_driver<span class="op">::</span>Event</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>Keyboard_driver<span class="op">::</span>pressed<span class="op">;</span></span></code></pre></div>
</section>
<section id="drajver-tastature-6" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> Keyboard_driver<span class="op">::</span>buffer<span class="op">[</span>KEYBOARD_BUFFER_SIZE<span class="op">];</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> Keyboard_driver<span class="op">::</span>count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> Keyboard_driver<span class="op">::</span>first_full <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> Keyboard_driver<span class="op">::</span>first_empty <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Keyboard_driver<span class="op">::</span>interrupt_handler<span class="op">(){</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>count<span class="op">&lt;</span>KEYBOARD_BUFFER_SIZE<span class="op">)</span> <span class="op">{</span></span></code></pre></div>
</section>
<section id="drajver-tastature-7" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>        buffer<span class="op">[</span>first_empty<span class="op">++]</span> <span class="op">=</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>        keyboard_controller<span class="op">.</span>data_reg<span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>first_empty <span class="op">==</span> KEYBOARD_BUFFER_SIZE<span class="op">)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>            first_empty <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        pressed<span class="op">.</span>signal<span class="op">();</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span></code></pre></div>
</section>
<section id="drajver-tastature-8" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> Keyboard_driver<span class="op">::</span>character_get<span class="op">(){</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    Atomic_region ar<span class="op">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>count<span class="op">==</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        pressed<span class="op">.</span>expect<span class="op">();</span></span></code></pre></div>
</section>
<section id="drajver-tastature-9" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> buffer<span class="op">[</span>first_full<span class="op">++];</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>first_full <span class="op">==</span> KEYBOARD_BUFFER_SIZE<span class="op">)</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        first_full <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    count<span class="op">--;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="drajver-tastature-10" class="slide level2">
<h2>Drajver Tastature</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> Keyboard_driver keyboard_driver<span class="op">;</span></span></code></pre></div>
</section>
<section id="znakovni-ulaz-izlaz" class="slide level2">
<h2>Znakovni ulaz-izlaz</h2>
<ul>
<li>Prilikom ulaza-izlaza znakova moguća su štetna preplitanja. Sprečavanje štetnih preplitanja ulaznih i izlaznih operacija podrazumeva da su one međusobno isključive.</li>
<li>Njihova međusobna isključivost se može ostvariti, ako se tastatura, odnosno ekran zaključa (zauzme) pre i otključa (oslobodi) nakon korišćenja, prilikom svakog izvršavanja odgovarajuće operacije.</li>
</ul>
</section>
<section id="znakovni-ulaz-izlaz-1" class="slide level2">
<h2>Znakovni ulaz-izlaz</h2>
<ul>
<li>Neuspešan pokušaj zaključavanja uređaja dovodi do zaustavljanja izvršavanja ovakve operacije, dok zaključavanje ne postane moguće.</li>
<li>Zaključavanje tastature i ekrana, tokom izvršavanja ulaznih i izlaznih operacija, se zasniva na korišćenju propusnica.</li>
<li>Posebne propusnice reprezentuju ekran i tastaturu.</li>
<li>Zauzimanje propusnice odgovara zaključavanju njenog uređaja, a oslobađanje propusnice odgovara otključavanju dotičnog uređaja.</li>
<li>Time se obezbeđuje međusobna isključivost pojedinačnih ulaznih i izlaznih operacija.</li>
</ul>
</section>
<section id="znakovni-ulaz-izlaz-2" class="slide level2">
<h2>Znakovni ulaz-izlaz</h2>
<ul>
<li>Klasa <code>Terminal_out</code> omogućuje znakovni izlaz, odnosno prikaz znaknova na ekranu.</li>
<li>Ona sadrži operacije koje omogućuju formatiranje prikazivanog podatka (njegovo pretvaranje u niz znakova).</li>
<li>Oznake <code>%6d</code>, <code>%6u</code>, <code>%11d</code> i <code>%11u</code> određuju broj cifara u decimalnom formatu u kome se prikazuju cifre celih označenih (d) i neoznačenih (u) brojeva, a oznaka <code>%.3e</code> određuje broj cifara iza decimalne tačke u decimalnom formatu u kome se prikazuju cifre razlomljenih brojeva.</li>
<li>Za prikaz niza znakova (znakovni izlaz) zadužena je operacija <code>string_put()</code> klase <code>Terminal_out</code>, koja se brine i o zaključavanju ekrana.</li>
</ul>
</section>
<section id="klasa-terminal_out" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">char</span> endl<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Terminal_out <span class="op">:</span> <span class="kw">private</span> mutex <span class="op">{</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">(</span><span class="at">const</span> Terminal_out<span class="op">&amp;);</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Terminal_out<span class="op">&amp;);</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> string_put<span class="op">(</span><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> string<span class="op">);</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-1" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">()</span> <span class="op">{};</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">int</span> number<span class="op">);</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">int</span> number<span class="op">);</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">short</span> number<span class="op">);</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">short</span> number<span class="op">);</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">long</span> number<span class="op">);</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">long</span> number<span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-2" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">double</span> number<span class="op">);</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">char</span> character<span class="op">);</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    Terminal_out<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> string<span class="op">);</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">friend</span> <span class="kw">class</span> Terminal_in<span class="op">;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> SHORT_FORMAT <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%6d</span><span class="st">&quot;</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-3" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> UNSIGNED_SHORT_FORMAT <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%6u</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> INT_FORMAT <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%11d</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> UNSIGNED_FORMAT <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%11u</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">char</span><span class="op">*</span> DOUBLE_FORMAT <span class="op">=</span> <span class="st">&quot;</span><span class="sc">% .3e</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> SHORT_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> INT_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> DOUBLE_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-4" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Terminal_out<span class="op">::</span>string_put<span class="op">(</span><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> string<span class="op">)</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    lock<span class="op">();</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span><span class="op">(*</span>string <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        display_driver<span class="op">.</span>character_put<span class="op">(*</span>string<span class="op">++);</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    unlock<span class="op">();</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-5" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">int</span> number<span class="op">)</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>INT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> INT_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-6" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">int</span> number<span class="op">)</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>INT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> UNSIGNED_FORMAT<span class="op">,</span> number<span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-7" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">short</span> number<span class="op">)</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>SHORT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-8" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> SHORT_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">short</span> number<span class="op">)</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-9" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>SHORT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> UNSIGNED_SHORT_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">long</span> number<span class="op">)</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-10" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb36"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>INT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> INT_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-11" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">unsigned</span> <span class="dt">long</span> number<span class="op">)</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>INT_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> UNSIGNED_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-12" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb38"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">double</span> number<span class="op">)</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span>DOUBLE_SIGNIFICANT_FIGURES_COUNT <span class="op">+</span> <span class="dv">2</span><span class="op">];</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>string<span class="op">,</span> DOUBLE_FORMAT<span class="op">,</span> number<span class="op">);</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-13" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb39"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="dt">char</span> character<span class="op">)</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> string<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    string<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> character<span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    string<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-14" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb40"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>Terminal_out<span class="op">&amp;</span> Terminal_out<span class="op">::</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> string<span class="op">)</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    string_put<span class="op">(</span>string<span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_out-15" class="slide level2">
<h2>Klasa <code>Terminal_out</code></h2>
<div class="sourceCode" id="cb41"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>Terminal_out cout<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in" class="slide level2">
<h2>Klasa Terminal_in</h2>
<ul>
<li>Klasa Terminal_in omogućuje preuzimanje znakova (znakovni ulaz).</li>
<li>Ona obezbeđuje zaključavanje tastature dok se izvršava njena operacija <code>string_get()</code>, kao i zaključavanje ekrana, radi eha znakova, preuzetih u ovoj operaciji.</li>
<li>Operacija <code>string_get()</code> poziva operaciju <code>edit()</code> klase <code>Terminal_in</code> koja je zadužena za eho znakova na ekranu i njihovo primitivno editiranje.</li>
<li>Preostale operacije klase <code>Terminal_in</code> koriste operaciju <code>string_get()</code> za preuzimanje nizova znakova koji odgovaraju raznim tipovima podataka.</li>
</ul>
</section>
<section id="klasa-terminal_in-1" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> INPUT_BUFFER_LENGTH <span class="op">=</span> <span class="dv">128</span><span class="op">;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Terminal_in <span class="op">:</span> <span class="kw">private</span> mutex <span class="op">{</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">(</span><span class="at">const</span> Terminal_in<span class="op">&amp;);</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Terminal_in<span class="op">&amp;);</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> index<span class="op">;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-2" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb43"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> pressed_enter<span class="op">;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buff<span class="op">[</span>INPUT_BUFFER_LENGTH<span class="op">];</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inline</span> <span class="dt">void</span> edit<span class="op">();</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> string_get<span class="op">(</span><span class="dt">unsigned</span> figures_count<span class="op">);</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">()</span> <span class="op">{};</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">int</span> <span class="op">&amp;</span>number<span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-3" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb44"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">short</span> <span class="op">&amp;</span>number<span class="op">);</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">long</span> <span class="op">&amp;</span>number<span class="op">);</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">double</span> <span class="op">&amp;</span>number<span class="op">);</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    Terminal_in<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">char</span> <span class="op">&amp;</span>character<span class="op">);</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> SHORT_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-4" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb45"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> INT_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> DOUBLE_SIGNIFICANT_FIGURES_COUNT <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHAR_ESC </span><span class="op">(</span><span class="dv">27</span><span class="op">)</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHAR_LF </span><span class="op">(</span><span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">)</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHAR_BS1 </span><span class="op">(</span><span class="ch">&#39;</span><span class="sc">\b</span><span class="ch">&#39;</span><span class="op">)</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHAR_BS2 </span><span class="op">(</span><span class="dv">127</span><span class="op">)</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-5" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Terminal_in<span class="op">::</span>edit<span class="op">()</span> <span class="co">//radi eho znakova preuzetih sa tastature na ekran</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span><span class="op">(</span>c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CHAR_ESC<span class="op">:</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>            buff<span class="op">[</span>index<span class="op">++]=</span>c<span class="op">;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>            display_driver<span class="op">.</span>character_put<span class="op">(</span><span class="ch">&#39;^&#39;</span><span class="op">);</span> <span class="co">//esc caret karakter</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-6" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb47"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CHAR_LF<span class="op">:</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>            pressed_enter <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CHAR_BS1<span class="op">:</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> CHAR_BS2<span class="op">:</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>index<span class="op">&gt;</span><span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-7" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb48"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>                buff<span class="op">[--</span>index<span class="op">]=</span><span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                display_driver<span class="op">.</span>character_put<span class="op">(</span><span class="ch">&#39;</span><span class="sc">\b</span><span class="ch">&#39;</span><span class="op">);</span> <span class="co">//pomeranje kursora nazad</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>                display_driver<span class="op">.</span>character_put<span class="op">(</span><span class="ch">&#39; &#39;</span><span class="op">);</span>  <span class="co">//stavljanje space-a</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>                display_driver<span class="op">.</span>character_put<span class="op">(</span><span class="ch">&#39;</span><span class="sc">\b</span><span class="ch">&#39;</span><span class="op">);</span> <span class="co">//pomeranje kursora nazad</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-8" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>            buff<span class="op">[</span>index<span class="op">++]=</span>c<span class="op">;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>            display_driver<span class="op">.</span>character_put<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    buff<span class="op">[</span>index<span class="op">]=</span><span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-9" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb50"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Terminal_in<span class="op">::</span>string_get<span class="op">(</span><span class="dt">unsigned</span> figures_count<span class="op">)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    lock<span class="op">();</span>                         <span class="co">//zakljucaj tastaturu</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    pressed_enter <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> keyboard_driver<span class="op">.</span>character_get<span class="op">();</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    cout<span class="op">.</span>lock<span class="op">();</span>                 <span class="co">//zakljucaj terminal</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-10" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb51"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>    edit<span class="op">();</span>                      <span class="co">//ispisi prvi karakter</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span><span class="op">((</span>index <span class="op">&lt;</span> <span class="op">(</span>figures_count <span class="op">-</span> <span class="dv">1</span><span class="op">))</span> <span class="op">&amp;&amp;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>             <span class="op">!</span>pressed_enter<span class="op">)</span> <span class="op">{</span>  <span class="co">//ispisuj do entera tj. do precizn.</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> keyboard_driver<span class="op">.</span>character_get<span class="op">();</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>        edit<span class="op">();</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    cout<span class="op">.</span>unlock<span class="op">();</span>              <span class="co">//otkljucaj terminal</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-11" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb52"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>    unlock<span class="op">();</span>                     <span class="co">//otkljucaj tastaturu</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>Terminal_in<span class="op">&amp;</span> Terminal_in<span class="op">::</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">int</span><span class="op">&amp;</span> number<span class="op">)</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    string_get<span class="op">(</span>INT_SIGNIFICANT_FIGURES_COUNT<span class="op">);</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    number <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>strtol<span class="op">(</span>buff<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-12" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb53"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>Terminal_in<span class="op">&amp;</span> Terminal_in<span class="op">::</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">short</span><span class="op">&amp;</span> number<span class="op">)</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    string_get<span class="op">(</span>SHORT_SIGNIFICANT_FIGURES_COUNT<span class="op">);</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    number <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>strtol<span class="op">(</span>buff<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-13" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb54"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>Terminal_in<span class="op">&amp;</span> Terminal_in<span class="op">::</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">long</span><span class="op">&amp;</span> number<span class="op">)</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    string_get<span class="op">(</span>INT_SIGNIFICANT_FIGURES_COUNT<span class="op">);</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    number <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>strtol<span class="op">(</span>buff<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-14" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb55"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>Terminal_in<span class="op">&amp;</span> Terminal_in<span class="op">::</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">double</span><span class="op">&amp;</span> number<span class="op">)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    string_get<span class="op">(</span>DOUBLE_SIGNIFICANT_FIGURES_COUNT<span class="op">);</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    number <span class="op">=</span> strtod<span class="op">(</span>buff<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-15" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb56"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>Terminal_in<span class="op">&amp;</span> Terminal_in<span class="op">::</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="dt">char</span><span class="op">&amp;</span> character<span class="op">)</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    string_get<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    character <span class="op">=</span> buff<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span></code></pre></div>
</section>
<section id="klasa-terminal_in-16" class="slide level2">
<h2>Klasa <code>Terminal_in</code></h2>
<div class="sourceCode" id="cb57"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span><span class="kw">this</span><span class="op">;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>Terminal_in cin<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<ul>
<li>Klasa <code>Disk_driver</code> sadrži drajver diska koji upravlja DMA kontrolerom diska.</li>
<li>DMA kontroler diska (objekat <code>disk_controller</code>) sadrži:
<ul>
<li>registar bloka (<code>disk_controller.block_reg</code>)</li>
<li>registar bafera (<code>disk_controller.buffer_reg</code>)</li>
<li>registar smera prenosa (<code>disk_controller.operation_reg</code>)</li>
<li>registar stanja (<code>disk_controller.status_reg</code>).</li>
</ul></li>
</ul>
</section>
<section id="klasa-disk_driver-1" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<ul>
<li>Podrazumeva se da nit pokreće prenos bloka tako što:
<ul>
<li>u registar bloka smesti broj prenošenog bloka</li>
<li>u registar bafera smesti adresu bafera koji učestvuje u prenosu</li>
<li>u registar smera prenosa smesti konstantu <code>DISK_READ</code> ili <code>DISK_WRITE</code></li>
<li>u registar stanja konstantu <code>DISK_STARTED</code></li>
</ul></li>
</ul>
</section>
<section id="klasa-disk_driver-2" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<ul>
<li>Nakon toga aktivnost niti se zaustavi dok traje prenos bloka.</li>
<li>Kraj prenosa bloka objavi prekid diska.</li>
<li>Zaustavljanje i nastavak aktivnostiniti omogućuje polje ready klase <code>Disk_driver</code>. Opisano ponašanje drajvera diska ostvaruju operacije <code>block_transfer()</code> i <code>interrupt_handler()</code> klase <code>Disk_driver</code>.</li>
<li>Broj vektora prekida diska određuje konstanta <code>DISK</code>.</li>
</ul>
</section>
<section id="klasa-disk_driver-3" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Disk_driver <span class="op">:</span> <span class="kw">public</span> Driver <span class="op">{</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> Event ready<span class="op">;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">void</span> interrupt_handler<span class="op">();</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    Disk_driver<span class="op">(</span><span class="at">const</span> Disk_driver <span class="op">&amp;);</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    Disk_driver<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Disk_driver <span class="op">&amp;);</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    Disk_driver<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> start_interrupt_handling<span class="op">(</span>DISK<span class="op">,</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver-4" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb59"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>                            interrupt_handler<span class="op">);</span> <span class="op">}</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">inline</span> <span class="dt">int</span> block_transfer<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">,</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                            Disk_operations operation<span class="op">);</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>Disk_driver<span class="op">::</span>Event Disk_driver<span class="op">::</span>ready<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver-5" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb60"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> Disk_driver<span class="op">::</span>interrupt_handler<span class="op">()</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    ready<span class="op">.</span>signal<span class="op">();</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> Disk_driver<span class="op">::</span>block_transfer<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>                <span class="dt">unsigned</span> block<span class="op">,</span> Disk_operations operation<span class="op">)</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver-6" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb61"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> r <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>block <span class="op">&lt;</span> DISK_BLOCKS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>        Atomic_region ar<span class="op">;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>        disk_controller<span class="op">.</span>block_reg <span class="op">=</span> block<span class="op">;</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>        disk_controller<span class="op">.</span>buffer_reg <span class="op">=</span> buffer<span class="op">;</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        disk_controller<span class="op">.</span>operation_reg <span class="op">=</span> operation<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver-7" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb62"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>        disk_controller<span class="op">.</span>status_reg <span class="op">=</span> DISK_STARTED<span class="op">;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>        ready<span class="op">.</span>expect<span class="op">();</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>        r <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> r<span class="op">;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="klasa-disk_driver-8" class="slide level2">
<h2>Klasa <code>Disk_driver</code></h2>
<div class="sourceCode" id="cb63"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> Disk_driver disk_driver<span class="op">;</span></span></code></pre></div>
</section>
<section id="blokovski-ulaz-izlaz" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Klasa <code>Disk</code> opisuje rukovanje virtuelnim (magneto-rotacionim) diskom.</li>
<li>Ova klasa definiše operacije <code>block_get()</code> i <code>block_put()</code> koje omogućuju preuzimanje bloka sa diska i smeštanje bloka na disk.</li>
<li>Prvi parametar ovih operacija pokazuje na niz od 512 bajta radne memorije koji učestvuje u prebacivanju bloka, a drugi parametar određuje broj bloka (u rasponu od 0 do 999).</li>
<li>Obe operacije su blokirajuće.</li>
</ul>
</section>
<section id="blokovski-ulaz-izlaz-1" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Pošto brzina pomeranja glave diska ograničava ukupnu brzinu diska, važno je skratiti put koji glava diska prelazi.</li>
<li>Optimizacija kretanja glave diska je moguća kada se skupi, više zahteva za čitanjem ili pisanjem.</li>
<li>Optimizacija se svodi na opsluživanje zahteva u redosledu staza na koje se oni odnose, a ne u hronološkom redosledu pojave zahteva.</li>
<li>Na taj način se izbegava da glava diska osciluje između vanjskih i unutrašnjih staza diska.</li>
</ul>
</section>
<section id="blokovski-ulaz-izlaz-2" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Da bi optimizacija kretanja glave diska bila moguća, neophodno je uticati na redosled zahteva za čitanjem ili pisanjem blokova.</li>
<li>To postavlja specifične zahteve na implementaciju klase <code>condition_variable</code> (proširenje klase).</li>
<li>Podrazumeva se da odabrani redosled deskriptora niti u listi uslova nastaje na osnovu privezaka koji se dodeljuju svakom deskriptoru prilikom njegovog uvezivanja u ovu listu.</li>
<li>Privesci imaju oblik neoznačenih celih brojeva, a njihovo dodeljivanje deskriptoru omogućuje dodatni, drugi parametar operacije <code>wait()</code>.</li>
</ul>
</section>
<section id="blokovski-ulaz-izlaz-3" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Uticaj na redosled deskriptora niti u listi uslova omogućuju operacije <code>first()</code>, <code>next()</code> i <code>last()</code> klase <code>condition_variable</code>.</li>
<li>Operacija <code>first()</code> omogućuje pozicioniranje pre prvog deskriptora u listi uslova.</li>
<li>Operacija <code>next()</code> omogućuje pozicioniranje pre narednog ili iza poslednjeg deskriptora u listi uslova.</li>
<li>Operacija <code>last()</code> omogućuje pozicioniranje iza poslednjeg deskriptora u listi uslova.</li>
<li>Podrazumeva se da operacija <code>notify_one()</code> klase <code>condition_variable</code> uvek izvezuje deskriptor sa početka liste uslova.</li>
</ul>
</section>
<section id="blokovski-ulaz-izlaz-4" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Optimizaciju kretanja glave diska omogućuje operacija <code>optimize()</code> klase <code>Disk</code>.</li>
<li>U situaciji kada je disk slobodan (kada polje state klase Disk sadrži konstantu <code>FREE</code>), poziv operacije <code>optimize()</code> dovodi do poziva blokirajuće operacije <code>disk_driver.block_transfer()</code>.</li>
<li>U toku njenog izvršavanja disk je zaposlen (polje state sadrži konstantu <code>BUSY</code>), a aktivnost pozivajuće niti je zaustavljena.</li>
<li>Ako u ovoj situaciji više niti, jedna za drugom, pozove operaciju <code>optimize()</code>, njihova aktivnost se zaustavlja, a njihovi deskriptori se uvezuju u jednu od dve liste uslova, koje odgovaraju polju <code>q</code> klase Disk.</li>
</ul>
</section>
<section id="blokovski-ulaz-izlaz-5" class="slide level2">
<h2>Blokovski ulaz-izlaz</h2>
<ul>
<li>Polje <code>index</code> ove klase indeksira ili listu uslova namenjenu za deskriptore niti koje čitaju blokove između trenutnog položaja glave diska i njegovog oboda ili listu uslova namenjenu za deskriptore niti koje čitaju blokove između centra rotacije ploče diska i trenutnog položaja njegove glave.</li>
<li>Podatak o trenutnom položaju glave diska (odnosno, o bloku koji se upravo čita) sadrži polje <code>boundary</code> klase <code>Disk</code>.</li>
<li>Polje <code>index</code> može imati vrednost 0 ili 1.</li>
<li>U pomenutim listama uslova deskriptori su poređani u rastućem redosledu brojeva blokova koje niti čitaju (što je u skladu sa optimizacijom kretanja glave diska).</li>
<li>Pomenuti brojevi blokova predstavljaju priveske deskriptora iz listi uslova.</li>
</ul>
</section>
<section id="klasa-disk" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb64"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> DISK_ERROR <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Disk <span class="op">{</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    mutex mx<span class="op">;</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">enum</span> Optimized_disk_state <span class="op">{</span> FREE<span class="op">,</span> BUSY <span class="op">};</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    Optimized_disk_state state<span class="op">;</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> boundary<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk-1" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>    condition_variable q<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> index<span class="op">;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    Disk<span class="op">(</span><span class="at">const</span> Disk<span class="op">&amp;);</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    Disk<span class="op">&amp;</span> <span class="kw">operator</span><span class="op">=(</span><span class="at">const</span> Disk<span class="op">&amp;);</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> optimize<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">,</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                    Disk_operations operation<span class="op">);</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span></code></pre></div>
</section>
<section id="klasa-disk-2" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb66"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>    Disk<span class="op">()</span> <span class="op">:</span> state<span class="op">(</span>FREE<span class="op">),</span> boundary<span class="op">(</span><span class="dv">0</span><span class="op">),</span> index<span class="op">(</span><span class="dv">0</span><span class="op">)</span> <span class="op">{};</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> block_get<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">);</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> block_put<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">);</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>Disk<span class="op">::</span>optimize<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">,</span> Disk_operations operation<span class="op">)</span></span></code></pre></div>
</section>
<section id="klasa-disk-3" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb67"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> tag<span class="op">;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> status<span class="op">;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>        unique_lock<span class="op">&lt;</span>mutex<span class="op">&gt;</span> lock<span class="op">(</span>mx<span class="op">);</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>state <span class="op">==</span> BUSY<span class="op">)</span> <span class="op">{</span></span></code></pre></div>
</section>
<section id="klasa-disk-4" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb68"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>            i <span class="op">=</span> index<span class="op">;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>block <span class="op">&lt;</span> boundary<span class="op">)</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>                i <span class="op">=</span> <span class="op">((</span>i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">?</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span><span class="dv">0</span><span class="op">));</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>q<span class="op">[</span>i<span class="op">].</span>first<span class="op">(&amp;</span>tag<span class="op">))</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>                <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span><span class="op">(</span>block <span class="op">&lt;</span> tag<span class="op">)</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">break</span><span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk-5" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb69"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span> <span class="cf">while</span><span class="op">(</span>q<span class="op">[</span>i<span class="op">].</span>next<span class="op">(&amp;</span>tag<span class="op">));</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>            q<span class="op">[</span>i<span class="op">].</span>wait<span class="op">(</span>lock<span class="op">,</span> block<span class="op">);</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>        state <span class="op">=</span> BUSY<span class="op">;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>        boundary <span class="op">=</span> block<span class="op">;</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    status <span class="op">=</span> disk_driver<span class="op">.</span>block_transfer<span class="op">(</span>buffer<span class="op">,</span></span></code></pre></div>
</section>
<section id="klasa-disk-6" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb70"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>                block<span class="op">,</span> operation<span class="op">);</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>        unique_lock<span class="op">&lt;</span>mutex<span class="op">&gt;</span> lock<span class="op">(</span>mx<span class="op">);</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>        state <span class="op">=</span> FREE<span class="op">;</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>q<span class="op">[</span>index<span class="op">].</span>first<span class="op">())</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>            index <span class="op">=</span> <span class="op">((</span>i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">?</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">:</span> <span class="op">(</span><span class="dv">0</span><span class="op">));</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        q<span class="op">[</span>index<span class="op">].</span>notify_one<span class="op">();</span></span></code></pre></div>
</section>
<section id="klasa-disk-7" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb71"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> status<span class="op">;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> Disk<span class="op">::</span>block_get<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">)</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> status<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk-8" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb72"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>    status <span class="op">=</span> optimize<span class="op">(</span>buffer<span class="op">,</span> block<span class="op">,</span> DISK_READ<span class="op">);</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> status<span class="op">;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> Disk<span class="op">::</span>block_put<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buffer<span class="op">,</span> <span class="dt">unsigned</span> block<span class="op">)</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> status<span class="op">;</span></span></code></pre></div>
</section>
<section id="klasa-disk-9" class="slide level2">
<h2>Klasa <code>Disk</code></h2>
<div class="sourceCode" id="cb73"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>    status <span class="op">=</span> optimize<span class="op">(</span>buffer<span class="op">,</span> block<span class="op">,</span> DISK_WRITE<span class="op">);</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> status<span class="op">;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>Disk disk<span class="op">;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</section></section>
<section>
<section id="pitanja" class="title-slide slide level1">
<h1>Pitanja</h1>

</section>
<section id="pitanja-1" class="slide level2">
<h2>Pitanja</h2>
<ul>
<li>Do čega dovodi pokušaj niti da preuzme znak kada je cirkularni bafer drajvera tastature prazan?</li>
<li>Šta se desi kada se napuni cirkularni bafer drajvera tastature?</li>
<li>Šta se desi u obradi prekida diska?</li>
</ul>
</section></section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@^4//dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="https://unpkg.com/reveal.js@^4//plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/zoom/zoom.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/math/math.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: false,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [
          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
